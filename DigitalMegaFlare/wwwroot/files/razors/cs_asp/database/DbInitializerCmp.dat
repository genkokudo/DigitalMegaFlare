using @(Model.Settings.Name).Entities;
using System.Linq;
@{
	var firstTable = "";
	
	foreach(var mod in Model.RootList){
		if(mod.IsMaster){
			firstTable = mod.MultipleName;
			break;
		}
	}
}
namespace @(Model.Settings.Name).Infrastructure.Database
{
	/// <summary>
	/// DBのマスタデータを初期化します。
	/// </summary>
	public class DbInitializer
	{
		public static void Initialize(ApplicationDbContext context)
		{
			@if(firstTable == ""){
				return;
			}
			if (context.@(firstTable).Any())
			{
				// マスタデータ作成済ならば何もしない
				return;
			}
			@foreach(var mod in Model.RootList){
			if(mod.IsMaster){
			@:
			@:// @(mod.Comment)の初期化
			@:context.@(mod.MultipleName).AddRange(@(mod.Name)Entity.GetInitialData());
			@:context.SaveChanges();
			}
			}

		}
	}
}